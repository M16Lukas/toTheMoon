<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.theMoon.moon.dao.CommunityMapper">

<!-- 댓글 등록 -->
<insert id="insertContent" parameterType="community">
	insert into
		community(
			content_nm
			,symbol
			,email
			,content
	) values (
		community_nm_seq.nextval
		,#{symbol}
		,#{email}
		,#{content,jdbcType=CLOB}
	) 
</insert>

<!-- 해당 주식의 댓글 가져오기 -->
<resultMap type="hashmap" id="getContentList">
	<result property="CONTENT" column="content" jdbcType="CLOB" javaType="java.lang.String"/>
</resultMap>
<select id="printContent" parameterType="String" resultType="hashmap" resultMap="getContentList">
select
	c.content_nm 										as content_nm
	,c.symbol 											as symbol
	,c.email 											as email
	,m.firstName 										as firstName
	,m.lastName 										as lastName
	,c.content 											as content
	,c.content_up 										as content_up
	,c.content_down 									as content_down
	,to_char(c.content_indate, 'YYYY-MM-DD HH24:MI:SS') as content_indate
from
	community c, member m
where
	c.email = m.email
and
	symbol = #{symbol}
</select>
</mapper>
